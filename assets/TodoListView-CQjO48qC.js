import{u as V,r,i as k,j,c as n,a as t,t as v,k as w,w as C,v as z,d as L,n as p,F as B,l as M,h as _,o as i,m as A}from"./index-CrCg3O70.js";const D={id:"todoListPage",class:"bg-half"},F=t("h1",null,[t("a",{href:"#"},"ONLINE TODO LIST")],-1),I={class:"todo_sm"},N={href:"#"},O={class:"conatiner todoListPage vhContainer"},U={class:"todoList_Content"},E={class:"inputBox"},P=t("i",{class:"fa fa-plus"},"+",-1),R=[P],q={class:"todoList_list"},G={class:"todoList_tab"},H={class:"todoList_items"},J={class:"todoList_label"},K=["onUpdate:modelValue"],Q=["onClick"],W=t("i",{class:"fa fa-times"},"x",-1),X=[W],Y={class:"todoList_statistics"},Z={key:0,class:"fs-1"},tt={key:1},h="https://todolist-api.hexschool.io",ot={__name:"TodoListView",setup(et){const x=V(),m=e=>sessionStorage.getItem(e),u=m("token"),y=m("username"),T=()=>{sessionStorage.clear(),x.push("/")},l=r([]),d=r(""),a=r("all"),$=()=>{loading.value||(loading.value=!0,_.post(`${h}/todos`,{content:d.value},{headers:{Authorization:u,"Content-Type":"application/json"}}).then(e=>{e.status===201&&(alert("新增成功"),c(),d.value="")}).catch(e=>{alert(e.response.data.message)}))},b=e=>{_.delete(`${h}/todos/${e}`,{headers:{Authorization:u,"Content-Type":"application/json"}}).then(s=>{s.status===200?(alert("刪除成功"),c()):alert(err.response.data.message)}).catch(s=>{alert(s.response.data.message)})},c=()=>{_.get(`${h}/todos`,{headers:{Authorization:u,"Content-Type":"application/json"}}).then(e=>{l.value=e.data.data}).catch(e=>{alert(e.response.data.message)})},S=k(()=>a.value==="completed"?l.value.filter(e=>e.status):a.value==="active"?l.value.filter(e=>!e.status):l.value),f=k(()=>l.value.filter(e=>e.status));return j(()=>{c()}),(e,s)=>(i(),n("div",D,[t("nav",null,[F,t("ul",null,[t("li",I,[t("a",N,[t("span",null,v(w(y))+"的代辦",1)])]),t("li",null,[t("a",{onClick:T},"登出")])])]),t("div",O,[t("div",U,[t("div",E,[C(t("input",{type:"text",placeholder:"請輸入待辦事項","onUpdate:modelValue":s[0]||(s[0]=o=>d.value=o)},null,512),[[z,d.value]]),t("a",{href:"#",onClick:s[1]||(s[1]=L(o=>$(),["prevent"]))},R)]),t("div",q,[t("ul",G,[t("li",null,[t("a",{onClick:s[2]||(s[2]=o=>a.value="all"),class:p({active:a.value==="all"})},"全部",2)]),t("li",null,[t("a",{onClick:s[3]||(s[3]=o=>a.value="active"),class:p({active:a.value==="active"})},"待完成",2)]),t("li",null,[t("a",{onClick:s[4]||(s[4]=o=>a.value="completed"),class:p({active:a.value==="completed"})},"已完成",2)])]),t("div",H,[(i(!0),n(B,null,M(S.value,o=>(i(),n("ul",{class:"todoList_item",key:o.id},[t("li",null,[t("label",J,[C(t("input",{class:"todoList_input",type:"checkbox",value:"true","onUpdate:modelValue":g=>o.status=g},null,8,K),[[A,o.status]]),t("span",null,v(o.content),1)]),t("a",{href:"#",onClick:L(g=>b(o.id),["prevent"])},X,8,Q)])]))),128)),t("div",Y,[f.value.length===0?(i(),n("p",Z,"目前尚無待辦事項")):(i(),n("p",tt,v(f.value.length)+" 個已完成項目",1))])])])])])]))}};export{ot as default};
