import{u as V,r,i as g,j,c as n,a as t,t as p,k as w,w as k,v as z,d as C,n as v,F as B,l as M,h as _,o as i,m as A}from"./index-BQ5PnPY8.js";const D={id:"todoListPage",class:"bg-half"},F=t("h1",null,[t("a",{href:"#"},"ONLINE TODO LIST")],-1),I={class:"todo_sm"},N={href:"#"},O={class:"conatiner todoListPage vhContainer"},U={class:"todoList_Content"},E={class:"inputBox"},P=t("i",{class:"fa fa-plus"},"+",-1),R=[P],q={class:"todoList_list"},G={class:"todoList_tab"},H={class:"todoList_items"},J={class:"todoList_label"},K=["onUpdate:modelValue"],Q=["onClick"],W=t("i",{class:"fa fa-times"},"x",-1),X=[W],Y={class:"todoList_statistics"},Z={key:0,class:"fs-1"},tt={key:1},h="https://todolist-api.hexschool.io",ot={__name:"TodoListView",setup(et){const L=V(),m=e=>sessionStorage.getItem(e),d=m("token"),x=m("username"),y=()=>{sessionStorage.clear(),L.push("/")},l=r([]),c=r(""),a=r("all"),T=()=>{_.post(`${h}/todos`,{content:c.value},{headers:{Authorization:d,"Content-Type":"application/json"}}).then(e=>{e.status===201&&(alert("新增成功"),u(),c.value="")}).catch(e=>{alert(e.response.data.message)})},$=e=>{_.delete(`${h}/todos/${e}`,{headers:{Authorization:d,"Content-Type":"application/json"}}).then(s=>{s.status===200?(alert("刪除成功"),u()):alert(err.response.data.message)}).catch(s=>{alert(s.response.data.message)})},u=()=>{_.get(`${h}/todos`,{headers:{Authorization:d,"Content-Type":"application/json"}}).then(e=>{l.value=e.data.data}).catch(e=>{alert(e.response.data.message)})},b=g(()=>a.value==="completed"?l.value.filter(e=>e.status):a.value==="active"?l.value.filter(e=>!e.status):l.value),S=g(()=>l.value.filter(e=>e.status));return j(()=>{u()}),(e,s)=>(i(),n("div",D,[t("nav",null,[F,t("ul",null,[t("li",I,[t("a",N,[t("span",null,p(w(x))+"的代辦",1)])]),t("li",null,[t("a",{onClick:y},"登出")])])]),t("div",O,[t("div",U,[t("div",E,[k(t("input",{type:"text",placeholder:"請輸入待辦事項","onUpdate:modelValue":s[0]||(s[0]=o=>c.value=o)},null,512),[[z,c.value]]),t("a",{href:"#",onClick:s[1]||(s[1]=C(o=>T(),["prevent"]))},R)]),t("div",q,[t("ul",G,[t("li",null,[t("a",{onClick:s[2]||(s[2]=o=>a.value="all"),class:v({active:a.value==="all"})},"全部",2)]),t("li",null,[t("a",{onClick:s[3]||(s[3]=o=>a.value="active"),class:v({active:a.value==="active"})},"待完成",2)]),t("li",null,[t("a",{onClick:s[4]||(s[4]=o=>a.value="completed"),class:v({active:a.value==="completed"})},"已完成",2)])]),t("div",H,[(i(!0),n(B,null,M(b.value,o=>(i(),n("ul",{class:"todoList_item",key:o.id},[t("li",null,[t("label",J,[k(t("input",{class:"todoList_input",type:"checkbox",value:"true","onUpdate:modelValue":f=>o.status=f},null,8,K),[[A,o.status]]),t("span",null,p(o.content),1)]),t("a",{href:"#",onClick:C(f=>$(o.id),["prevent"])},X,8,Q)])]))),128)),t("div",Y,[l.value.length===0?(i(),n("p",Z,"目前尚無待辦事項")):(i(),n("p",tt,p(S.value.length)+" 個已完成項目",1))])])])])])]))}};export{ot as default};
