import{u as V,r,i as g,j,c as i,a as t,t as v,k as w,w as k,v as z,d as C,n as p,F as B,l as M,h as _,o as u,m as A}from"./index-BQxJnnA-.js";const D={id:"todoListPage",class:"bg-half"},F=t("h1",null,[t("a",{href:"#"},"ONLINE TODO LIST")],-1),I={class:"todo_sm"},N={href:"#"},O={class:"conatiner todoListPage vhContainer"},U={class:"todoList_Content"},E={class:"inputBox"},P=t("i",{class:"fa fa-plus"},"+",-1),R=[P],q={key:0,class:"fs-1"},G={key:1,class:"todoList_list"},H={class:"todoList_tab"},J={class:"todoList_items"},K={class:"todoList_label"},Q=["onUpdate:modelValue"],W=["onClick"],X=t("i",{class:"fa fa-times"},"x",-1),Y=[X],Z={class:"todoList_statistics"},h="https://todolist-api.hexschool.io",st={__name:"TodoListView",setup(tt){const L=V(),f=e=>sessionStorage.getItem(e),d=f("token"),x=f("username"),y=()=>{sessionStorage.clear(),L.push("/")},l=r([]),n=r(""),a=r("all"),T=()=>{if(n.value===""){alert("請輸入代辦事項");return}_.post(`${h}/todos`,{content:n.value},{headers:{Authorization:d,"Content-Type":"application/json"}}).then(e=>{e.status===201&&(alert("新增成功"),c(),n.value="")}).catch(e=>{alert(e.response.data.message)})},$=e=>{_.delete(`${h}/todos/${e}`,{headers:{Authorization:d,"Content-Type":"application/json"}}).then(s=>{s.status===200?(alert("刪除成功"),c()):alert(err.response.data.message)}).catch(s=>{alert(s.response.data.message)})},c=()=>{_.get(`${h}/todos`,{headers:{Authorization:d,"Content-Type":"application/json"}}).then(e=>{l.value=e.data.data}).catch(e=>{alert(e.response.data.message)})},b=g(()=>a.value==="completed"?l.value.filter(e=>e.status):a.value==="active"?l.value.filter(e=>!e.status):l.value),S=g(()=>l.value.filter(e=>!e.status));return j(()=>{c()}),(e,s)=>(u(),i("div",D,[t("nav",null,[F,t("ul",null,[t("li",I,[t("a",N,[t("span",null,v(w(x))+"的代辦",1)])]),t("li",null,[t("a",{onClick:y},"登出")])])]),t("div",O,[t("div",U,[t("div",E,[k(t("input",{type:"text",placeholder:"請輸入待辦事項","onUpdate:modelValue":s[0]||(s[0]=o=>n.value=o)},null,512),[[z,n.value]]),t("a",{href:"#",onClick:s[1]||(s[1]=C(o=>T(),["prevent"]))},R)]),l.value.length===0?(u(),i("p",q,"目前尚無待辦事項")):(u(),i("div",G,[t("ul",H,[t("li",null,[t("a",{onClick:s[2]||(s[2]=o=>a.value="all"),class:p({active:a.value==="all"})},"全部",2)]),t("li",null,[t("a",{onClick:s[3]||(s[3]=o=>a.value="active"),class:p({active:a.value==="active"})},"待完成",2)]),t("li",null,[t("a",{onClick:s[4]||(s[4]=o=>a.value="completed"),class:p({active:a.value==="completed"})},"已完成",2)])]),t("div",J,[(u(!0),i(B,null,M(b.value,o=>(u(),i("ul",{class:"todoList_item",key:o.id},[t("li",null,[t("label",K,[k(t("input",{class:"todoList_input",type:"checkbox",value:"true","onUpdate:modelValue":m=>o.status=m},null,8,Q),[[A,o.status]]),t("span",null,v(o.content),1)]),t("a",{href:"#",onClick:C(m=>$(o.id),["prevent"])},Y,8,W)])]))),128)),t("div",Z,[t("p",null,v(S.value.length)+" 個未完成項目",1)])])]))])])]))}};export{st as default};
